<div class="tab-container">
  <div class="tab-header">
    <button
      class="tab-button"
      [class.active]="activeTab === 'todo'"
      (click)="setActiveTab('todo')">
      <img class="tab-icon" src="assets/icons/tram.svg" alt="Tram">
    </button>
    <button
      class="tab-button"
      [class.active]="activeTab === 'map'"
      (click)="setActiveTab('map')">
      <img class="tab-icon" src="assets/icons/map.svg" alt="Map">
    </button>
  </div>

  <div class="tab-content">
    <div class="tab-panel" [class.active]="activeTab === 'todo'">
      <div class="stops-container">
        <h2>Nächste Haltestellen</h2>
        
        <div class="loading-overlay" *ngIf="isLoading">
          <div class="loading-spinner"></div>
          <p>Suche nächste Haltestellen...</p>
        </div>
        
        <div class="error-overlay" *ngIf="error && !isLoading">
          <div class="error-content">
            <div class="error-icon">🚏</div>
            <p>{{ error }}</p>
            <button class="retry-button" (click)="retryLoadStops()">Erneut versuchen</button>
          </div>
        </div>
        
        <div class="stops-list" *ngIf="!isLoading && !error && nearestStops.length > 0">
          <div class="stop-item" *ngFor="let stop of nearestStops; let i = index">
            <div class="stop-info">
              <h3 class="stop-name">{{ stop.stop_name }} {{ stop.stop_num }}</h3>
              <p class="stop-distance">{{ (stop.distance! * 1000) | number:'1.0-0' }}m entfernt</p>
              <div class="stop-directions" *ngIf="stop.directions && stop.directions.length > 0">
                <p class="directions-label">Richtungen:</p>
                <div class="directions-list">
                  <span class="direction-item" *ngFor="let direction of stop.directions">{{ direction }}</span>
                </div>
              </div>
            </div>
            <div class="stop-icon">🚋</div>
          </div>
        </div>
      </div>
    </div>

    <div class="tab-panel" [class.active]="activeTab === 'map'">
      <app-map></app-map>
    </div>
  </div>
</div>

<router-outlet/>
